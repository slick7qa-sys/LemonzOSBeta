#!/bin/bash
set -e

echo "LemonzOS: Finalizing configuration..."

# 1. Set the hostname
echo "lemonzos" > /etc/hostname

# 2. Configure networking (Systemd-networkd)
cat <<EOF > /etc/systemd/network/20-wired.network
[Match]
Name=en* eth*

[Network]
DHCP=yes
EOF

# 3. Create a default user (optional, but helpful for testing)
if ! id "lemon" &>/dev/null; then
    useradd -m -s /bin/bash lemon
    echo "lemon:lemon" | chpasswd
fi

echo "LemonzOS: Post-install complete."
